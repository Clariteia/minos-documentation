

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Data Model &mdash; Minos Documentation  documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Messaging" href="messaging.html" />
    <link rel="prev" title="Architecture" href="_toc.html" />
    <link href="../_static/style.css" rel="stylesheet" type="text/css">

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> Minos Documentation
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../quickstart/_toc.html">QuickStart</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="_toc.html">Architecture</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">Data Model</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#introduction">Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="#entity">Entity</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#entityset">EntitySet</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#valueobject">ValueObject</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#valueobjectset">ValueObjectSet</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#aggregate">Aggregate</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#aggregateref">AggregateRef</a></li>
<li class="toctree-l4"><a class="reference internal" href="#modelref">ModelRef</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="messaging.html">Messaging</a></li>
<li class="toctree-l2"><a class="reference internal" href="cqrs.html">CQRS</a></li>
<li class="toctree-l2"><a class="reference internal" href="ports_and_adapters.html">Ports and Adapters</a></li>
<li class="toctree-l2"><a class="reference internal" href="rest_handler.html">REST Handler</a></li>
<li class="toctree-l2"><a class="reference internal" href="saga.html">SAGA</a></li>
<li class="toctree-l2"><a class="reference internal" href="decorators.html">Decorators</a></li>
<li class="toctree-l2"><a class="reference internal" href="transactionality.html">Transactionality</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../api.html">API Reference</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Minos Documentation</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="_toc.html">Architecture</a> &raquo;</li>
        
      <li>Data Model</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/architecture/data_model.md.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="data-model">
<h1>Data Model<a class="headerlink" href="#data-model" title="Permalink to this headline">¶</a></h1>
<div class="section" id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>As every software system, <code class="docutils literal notranslate"><span class="pre">Minos</span></code> encourages the use of a particular data model that restricts how the system
works. <code class="docutils literal notranslate"><span class="pre">Minos</span></code> follows the analysis patterns proposed in Domain Driven Design (DDD), which have more than 20 years of
proven validity to tackle software complexity.</p>
</div>
<div class="section" id="entity">
<h2>Entity<a class="headerlink" href="#entity" title="Permalink to this headline">¶</a></h2>
<p>An <code class="docutils literal notranslate"><span class="pre">entity</span></code> is the minimum level of abstraction possible. It represents a simple business concept that owns its
attributes and the functions that transform them. It can be something like a wheel of a car or the car itself.</p>
<p><code class="docutils literal notranslate"><span class="pre">Entities</span></code> are responsible for making the system speak the ubiquitous language of the business. This means the terms
used for both operations and attributes must convey meaning of the system.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">TicketEntry</span><span class="p">(</span><span class="n">Entity</span><span class="p">):</span>
    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">unit_price</span><span class="p">:</span> <span class="nb">float</span>
    <span class="n">quantity</span><span class="p">:</span> <span class="nb">int</span>
    <span class="n">product</span><span class="p">:</span> <span class="n">ModelRef</span><span class="p">[</span><span class="n">Product</span><span class="p">]</span>
</pre></div>
</div>
<div class="section" id="entityset">
<h3>EntitySet<a class="headerlink" href="#entityset" title="Permalink to this headline">¶</a></h3>
<p>TODO</p>
</div>
</div>
<div class="section" id="valueobject">
<h2>ValueObject<a class="headerlink" href="#valueobject" title="Permalink to this headline">¶</a></h2>
<p>A <code class="docutils literal notranslate"><span class="pre">value</span> <span class="pre">object</span></code> is a concept of the domain whose identity is given by the whole set of its attributes’ values. For
example, an address does not have an identity other than its street, number and so, and if any of them are modified, a
new address is actually being created. Thus, <code class="docutils literal notranslate"><span class="pre">Minos</span></code> encourages <code class="docutils literal notranslate"><span class="pre">value</span> <span class="pre">object</span></code>‘s immutability</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Address</span><span class="p">(</span><span class="n">ValueObject</span><span class="p">):</span>
    <span class="n">street</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">street_no</span><span class="p">:</span> <span class="nb">int</span>
</pre></div>
</div>
<div class="section" id="valueobjectset">
<h3>ValueObjectSet<a class="headerlink" href="#valueobjectset" title="Permalink to this headline">¶</a></h3>
<p>TODO</p>
</div>
</div>
<div class="section" id="aggregate">
<h2>Aggregate<a class="headerlink" href="#aggregate" title="Permalink to this headline">¶</a></h2>
<p>An Aggregate is a composition of entities that work together in order to reach a complex goal. One of the main objectives of suchc onstructions is to encapsulate business complexity behind an <code class="docutils literal notranslate"><span class="pre">aggregate</span></code> root, which is an <code class="docutils literal notranslate"><span class="pre">entity</span></code>
taking that role. Thus, no message will be sent to each particular entity within the <code class="docutils literal notranslate"><span class="pre">aggregate</span></code>, but rather the
aggregate root will handle and route each request.</p>
<p>Because of this reason, there is a one to one correspondence among and <code class="docutils literal notranslate"><span class="pre">aggregate</span></code> and a microservice. This means a
microservice will encapsulate all the logic related to a business concept and provide the API for all the <code class="docutils literal notranslate"><span class="pre">aggregate</span></code>
components.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Ticket</span><span class="p">(</span><span class="n">Aggregate</span><span class="p">):</span>
    <span class="n">code</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">total_price</span><span class="p">:</span> <span class="nb">float</span>
    <span class="n">entries</span><span class="p">:</span> <span class="n">EntitySet</span><span class="p">[</span><span class="n">TicketEntry</span><span class="p">]</span>
</pre></div>
</div>
<div class="section" id="aggregateref">
<h3>AggregateRef<a class="headerlink" href="#aggregateref" title="Permalink to this headline">¶</a></h3>
<p>No software system consists just of one microservice. Microservices always come in groups and collaborate to provide the
expected behaviour. For that reason, <code class="docutils literal notranslate"><span class="pre">Minos</span></code> provides an <code class="docutils literal notranslate"><span class="pre">AggregateRef</span></code> concept, which defines the dependencies that a
microservice has with others of its ecosystem.</p>
<p>Mainly, defining an <code class="docutils literal notranslate"><span class="pre">AggregateRef</span></code> serves as a mean to compact dependencies’ data within the <code class="docutils literal notranslate"><span class="pre">Aggregate</span></code> itself. Thus</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Ticket</span><span class="p">(</span><span class="n">AggregateRef</span><span class="p">):</span>
    <span class="n">total_price</span><span class="p">:</span> <span class="nb">float</span>
    <span class="n">entries</span><span class="p">:</span> <span class="n">EntitySet</span><span class="p">[</span><span class="n">TicketEntry</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="section" id="modelref">
<h3>ModelRef<a class="headerlink" href="#modelref" title="Permalink to this headline">¶</a></h3>
<p>A <code class="docutils literal notranslate"><span class="pre">ModelRef</span></code> connects an <code class="docutils literal notranslate"><span class="pre">AggregateRef</span></code> to the <code class="docutils literal notranslate"><span class="pre">Aggregate</span></code> root. When a microservice subscribes to the <code class="docutils literal notranslate"><span class="pre">Aggregate</span></code>, the <code class="docutils literal notranslate"><span class="pre">ModelRef</span></code> is responsible for bringing back the content of the <code class="docutils literal notranslate"><span class="pre">AggregateRef</span></code>, put everything together and publish it. Thus, the event does not publish just an UUID but an object with the structure of the <code class="docutils literal notranslate"><span class="pre">AggregateRef</span></code>.</p>
<p>For example, let’s consider the following <code class="docutils literal notranslate"><span class="pre">Aggregate</span></code> structure:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Order</span><span class="p">(</span><span class="n">Aggregate</span><span class="p">):</span>
    <span class="n">ticket</span><span class="p">:</span> <span class="n">ModelRef</span><span class="p">[</span><span class="n">Ticket</span><span class="p">]</span>

<span class="k">class</span> <span class="nc">Ticket</span><span class="p">(</span><span class="n">AggregateRef</span><span class="p">):</span>
    <span class="n">total_price</span><span class="p">:</span> <span class="nb">float</span>
    <span class="n">entries</span><span class="p">:</span> <span class="n">EntitySet</span><span class="p">[</span><span class="n">TicketEntry</span><span class="p">]</span>
</pre></div>
</div>
<p>If a service is subscribed to the <code class="docutils literal notranslate"><span class="pre">OrderCreated</span></code> event, it will receive the Ticket with its total_price` and entries instead of just the UUID associated to that Ticket.</p>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="messaging.html" class="btn btn-neutral float-right" title="Messaging" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="_toc.html" class="btn btn-neutral float-left" title="Architecture" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, Clariteia.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>